Возможные практические задания:
1. ENSp - простое задание по конфигурированию топологии
2. Определение корректности адреса IPv6
3. Определение маски подсети, ID сети, broad-cast адреса, диапазона доступных адресов в подсети
4. Сегментация подсети при IPv4
Вопросы к зачёту:
# 1. Эволюция вычислительных сетей
## От полностью централизованных систем к вычислительным сетям (одна из распределённых систем)

- Система пакетной обработки
Первые компьютеры 50-х годов были большими, дорогими, громоздкими и занимали целые этажи зданий. Они не были предназначены для интерактивной работы. Система пакетной обработкой, как правило, строилась на базе Mainframe'a - мощного и надёжного компьютера универсального назначения. Пользователи подготавливали свои программы и данные на перфокартах, операторы вычислительного центра загружали их в Mainframe, а результаты обработки можно было получить на следующий день.

Минусы: 
1. Высокая цена ошибки (день работы в никуда)
2. Занимает много места и потребляют большое количество ресурсов (электричество, рабочая сила, перфокарты)
3. Дороговизна
4. Сугубо портативны
5. Перфокарта - ненадёжный носитель информации (может порваться, размокнуть, лишнее отверстие может привести к ошибке во всех данных)

Плюс (единственный) : Самый эффективный режим использования вычислительной мощности, так как самое дорогое устройство - процессор - почти не простаивает, а занят обработкой информации.

- Многотерминальные системы (система распределения времени через очереди запросов)
Примерно в начале 60-х годов по мере удешевления процессоров появились новые способы организации вычислительного процесса, которые позволяли учесть интересы пользователей, стали развиваться интерактивные, многотерминальные системы. В таких системах компьютер отдавался в распоряжение сразу нескольким пользователям, время реакции при этом было настолько мало, что пользователям была незаметна псевдопараллельная работа с вычислительным компьютером других пользователей.  Вычислительная мощность оставалась полностью централизованной, однако некоторые функции - ввод, вывод - стали распределёнными (несколько различных терминалов с которых вводилась информация и на них же получали результаты).

Многотерминальные системы, работающие в режиме разделения времени, стали первым шагом на пути к созданию первых локальных сетей. В это время был актуален так называемый закон Гроша: производительность компьютера была прямо пропорциональна квадрату его стоимости (было выгоднее за одни и те же средства приобрести один мощный компьютер, чем два менее мощных, так как их суммарная вычислительная мощь была ниже, чем у дорого компьютера)

- Глобальные сети (автоматическая сеть)
**Хронологически первыми появились глобальные сети, так как всё началось с решения более простой задачи - соединения Mainframe'a с удалённым на несколько километров терминалом _для этого использовались существующие на тот момент телефонные сети и модемы_.**

Развитие продолжилось соединением 2-х Mainframe'ов удалённых друг от друга на несколько сотен километров. **Компьютеры получили возможность обмениться данными в автоматическом режиме - а он является базовым для любой вычислительной сети**

С помощью этого механизма появились такие **сетевые службы как электронная почта, синхронизация баз данных и обмен файлами**. Именно при построении первых глобальных сетей были предложены и отработаны основные концепции и идеи современных вычислительных сетей

### Концепции вычислительных сетей:
1. Многоуровневое построение коммуникационных протоколов (Протоколы: HTTP, TCP, UDP, IP; Модель OSI)
2. Коммутация пакетов ()
3. Маршрутизация пакетов в составных сетях (Переход пакетов из одной сети до пользователя в другой сети)

## Локальные сети:

В начале 70-х годов произошёл технологический прорыв в области производства компьютерных компонентов: появились БИС (Большие интегральные схемы), позже - СБИС (Сверх-большие БИС). Их сравнительно невысокая стоимость и высокие функциональные возможности привели к созданию мини-компьютеров, а закон Гроша перестал соответствовать действительности. Тем не менее - работа таких мини-ЭВМ на предприятиях оставалась полуавтономной, объединению компьютеров в локальную сеть мешало 2 причины:

1. Аппаратная несовместимость (Различные физические порты, размеры)
2. Программная несовместимость (Нет стандартов по использованию протоколов передачи данных, различные операционные системы внутри ЭВМ)

Тем не менее, первые локальные сети появлялись с нестандартными устройствами сопряжения и программными костылями. В середине 80-х годов положение дел в локальных сетях стало координально меняться, появились стандартные сетевые технологии, такие как: Ethernet, Token Ring и Arcnet. Мощным стимулом для их развития послужили персональные компьютеры.

Стандартные сетевые технологии превратили процесс построения сети из искусства в рутинную работу теперь для создания сети достаточно было:

1. Купить сетевые адаптеры с соответствующей технологией
2. Купить стандартный кабель
3. Присоединить кабель к адаптерам с помощью стандартных разъёмов
4. Установить одну из сетевых операционных систем (Например, NetWere)

**Последствием и одновременно движущей силой такого прогресса стало появление огромного числа непрофессиональных пользователей**
# 2. Основные программные и аппаратные компоненты сети
## Модель комплекса аппаратных средств (слайд)
![[Pasted image 20231231172151.png]]
1 и 2 - аппаратный слой
3 и 4 - программный слой

Изначально самым дорогим являлся первый слой - аппаратный слой, в последние годы на первый план выходит 2 слой - коммуникационной оборудование. 

Сегодня коммуникационное устройство может представлять собой сложный специализированный мульти-процессор, который нужно конфигурировать, оптимизировать и администрировать. 

# 3. Современные тенденции развития сетей и что даёт предприятию использование сетей
## Современные тенденции:
1. _Разрыв между локальными и глобальными сетями постоянно сокращается_ (глобальные сети в своём развитии стремятся к скорости локальных, за счёт этого в глобальных сетях появляются службы доступа к ресурсам, такие же удобные и прозрачные как и в локальных сетях. Например, глобальная сеть интернет)
2. _Появление разнообразного коммуникативного оборудования для локальных сетей_ (Ранее в локальных сетях использовалось неинтеллектуальное оборудование, такое как: мосты, повторитель, концентратор. Последние годы используются коммутаторы и маршрутизаторы, которые являются более умными, например, самостоятельно определяют получателя данных, а не передают данные всем узлам сети как ранее)
3. _Возродился интерес к крупным компьютерам_ (Возродился интерес к мэйнфреймам, которые стали выполнять функцию сервера, существуют следующие классы серверов: 
- **Файл-сервер (сервер баз данных, зеркальный сервер, облачный сервер, сервер видео-хостинга)**
- Игровой
- Коммуникационный
- **Print-сервер (сервер принтеров)**
- Сервер информационной безопасности (корпоративный VPN, видеонаблюдение, прокси-сервер)
- **Сервер виртуализации**
- **Сервер унифицированных коммуникаций (видеонаблюдение, почта или мессенджер, IP телефония)**
- **Вычислительные сервера (майнинг, обслуживание ИИ)**

4. _Обработка несвойственной ранее вычислительным сетям информации_ (если ранее на первых этапах развития сетей передавалась только текстовая информация, то вскоре появился мультимедийный трафик, а в последние годы - и другая не свойственная ранее вычислительным сетям информация, например, зашифрованные транзакции - ATH, телеметрия, данные о здоровье человека, геоданные и т.д. Сложность передачи такой информации связана с её чувствительности к задержкам, которые могут привести к искажению информации - она быстро становится неактуальной)

Телеметрия - передача данных о состоянии устройств

ATH - технология передачи зашифрованной транзакции (сбор всех транзакций за n-ое время в одну единую транзакцию и её одобрения или отклонение. Если хотя бы одна транзакция из этой "большой транзакции" некорректа, то вся "большая транзакция" отклоняется)

## Что даёт предприятию использование сетей
1. Повышение эффективности работы, которое может выражаться, например, в увеличении прибыли предприятия
2. Более высокая отказоустойчивость информационных систем и аппаратного обеспечения предприятия
3. Автоматизация технологических процессов
4. Возможность совместного использования данных и устройств.
5. Оперативный доступ к обширной корпоративной информации
6. Совершенствованию коммуникаций

# 4. Что такое компьютерная сеть? Описание процесса передачи информации.
- Компьютерные сети - это система, которая служит, чтобы обеспечить обмен данными между вычислительными устройствами или программным обеспечением
- Среда передачи - физическая субстанция, по которой происходит передача данных

Структура пакета (было не под запись):

- Заголовок (отправитель, получатель, время жизни пакетов - TTL (количество прыжков по маршрутизаторам, после которых пакет будет удалён. Максимум - 256, измеряется от нуля )
- PDU - полезная нагрузка, данные
- Контрольная сумма - концевик (проверка получателем файла на целостность данных)

- Порт по умолчанию - куда, отправляются данные, если адрес не определён 

- Каждый раз в пакет записывается информация о пройденных маршрутизаторах

## Описание процесса передачи информации в сети:
1. Блок данных делится на фрагменты. Фрагменты файла упаковываются в пакеты. Служебная информация будет находится в заголовке и концевике каждого пакета. 
- В заголовке указывается адрес отправителя, адрес получателя, а также другая служебная информация, например: время жизни пакета TTL (количество переходов, хобов, между маршрутизаторами. Как только TTL станет равен нулю маршрутизатор уничтожит пакет и отправит уведомление об этом отправителям), порядковый номер пакета (чтобы определить точный номер пакета файла. Например, чтобы буквы в слове стояли в правильном порядке), размер полезной нагрузки. 
- В концевике записывается контрольная сумма, которая нужна для проверки на целостность пакетов (число, формируемое протоколом передачи данных

2. Пакет с данными доходит до маршрутизатора-шлюза с помощью сетевого кабеля. После получения пакета шлюз декапсулирует его: из заголовка считывает адрес назначения пакета и сверяет его со своей таблицей маршрутизации. Затем пакет снова инкапсулируется маршрутизатором и отправляется через тот порт, который был записан в таблице маршрутизации напротив адреса получателя Если адреса получателя нет в таблице, то возможны два варианта:
- пакет направляется через порт по умолчанию на следующий транзитный маршрутизатор. Так происходит до тех пор, пока пакет не найдёт маршрутизатор с адресом получателя или не истечёт TTL
- Маршрутизатор уничтожит пакет и передаст отправителю уведомление о том, что получатель не найден. Если маршрутизатор старый, то может и уведомления не будет

3. Сетевой кабель является средой передачи информации. После того как пакет через интернет и транзитные маршрутизаторы достигает локальной сети, в которой находится получатель, маршрутизатор-шлюз декапсулирует пакет, проверяет служебные данные, инкапсулирует их вновь и отправляет на компьютер получателя. 
4. Компьютер-получатель декапсулирует пакет, сверяет контрольную сумму из концевика. Если она корректна, значит данные дошли без искажений. Как только все пакеты пришли на компьютер получатель, он собирает из них полноценный файл и отправляет их приложению, которому этот файл предназначался
5. На этом передача данных заканчивается

Чаще всего маршрутизаторы принимают не конкретный ip-адрес, а номер сети

Концевик может отсутствовать, но заголовок обязателен

Хосты, узлы - компьютеры и иные устройства, находящиеся в сети

Шлюз - точка сети, которая служит выходом в другую сеть (маршрутизатор, который указывает на другой маршрутизатор). Более конкретное определение - сетевое устройство, которое обеспечивает такие функции как: преобразование в протокол, выбор маршрута и обмен данными. Определение относятся не к определённому типу устройства, а к устройствам с определённым местоположением и функциональностью. Т.е - маршрутизатор является шлюзом только когда стоит на границе локальной сети. Шлюзом может быть и обычный компьютер

Транзитные маршрутизаторы НЕ шлюзы

Сетевые экраны - отвечают за фильтрацию трафика в 3-х уровневой сети

Инкапсуляция - процесс добавления одних блоков данных в другой для формирования нового блока данных (данные в данных)

У каждого сетевого адаптера свой ip-адрес.

# 5. Сетевые устройства. Режимы передачи информации.
## Коммутаторы-
коммуникационное устройство, главной задачей которого является соединение конечных устройств в локальную сеть.

- Коммутаторы работают на втором уровне - канальном - модели OSI, где для адресации используются физические MAC-адреса, которые закладываются производителем (но их можно поменять... но нежелательно). Передача данных происходит с помощью _**кадров

Коммутатор образует _**широковещательный домен**_ - набор хостов, которые могут обмениваться данными, отправляя их на втором уровне, канальном, - через коммутатор. Если условный узел _A_ высылает широковещательный пакет для всех хостов по локальной сети и хост _B_ получает его, то это означает, что оба узла находятся в одном _**широковещательном домене**_.

Существует также _**коллизионный домен**_, когда 2 хоста соединены одним проводом. В таком домене хосты "борются" за разделяемую между ними среду передачи данных и при наложении одной передачи данных на другую возникают коллизии и данные искажаются (в основном **БЫЛИ** характерен для общей шины и каоксиальном кабеле). Мостовое соединение создаёт домен коллизий, но не широковещательный домен. _**Т.е - коллизионный домен создаётся мостом**_.

**_Маршрутизатор не создаёт ни одного из этих доменов. Маршрутизатор, напротив, ставится для изолирования широковещательных доменов._**

- Широковещательная рассылка - передача данных на все устройства в локальной сети. (Например, подключаем новый хост и он делает "приветственную" рассылку, информируя всех о подключении)
- arp-таблица - таблица сопоставления MAC адресов и IP адресов. По умолчанию время хранения arp-таблицы (до её обновления) - 3 минуты. Данная величина может изменяется.

Компьютеры по обе стороны от коммутатора в локальной сети не видят между собой коммутатора - он для них "прозрачен" (невидим), поэтому могут переслать данные просто по MAC-адресу или через широковещательный запрос.

- MAC адрес широковещательной рассылки: ff-ff-ff-ff-ff-ff (отправляем сюда данные и они передаются на весь широковещательный домен)

**Если хосты находятся в разных локальных сетях, то использовать широковещательную рассылку не получится**. В таком случае порядок действий такой:
1. Отправитель сравнит свой IP-адрес с IP-адресом получателя и поймёт, что они находятся в разных широковещательных доменах (разных локальных сетях). 
2. Отправитель инкапсулирует свои данные в сетевой пакет и указывает IP-адрес получателя, а затем - инкапсулирует (упаковывает) в кадр и указывает MAC-адрес маршрутизатора-шлюза(). 
3. Маршрутизатор, получая пакет, декапсулирует его, убеждается, что данные пришли по его MAC-адресу, но по IP-адресу понимает, что данные нужно отправить дальше. 
4. Проверяет адрес получателя по таблице маршрутизации (НЕ arp-таблица, разные вещи) и отправляет их по соответствующему порту, для отправки этих данных маршрутизатор инкапсулирует (оборачивает) MAC-адрес следующего маршрутизатора. 
5. Так повторяется до момента, пока данные не дойдут до шлюза той сети, где находится получатель (или не обнулиться TTL) 

## Маршрутизатор
Маршрутизатор нужен для соединения локальных сетей и определения оптимального маршрута передачи данных

### Функции маршрутизаторов:
- Изоляция широковещательных доменов
- Соединение сетей одного или разных типов (звезду соединяем с общей шиной)
- Поддержка таблицы маршрутизации и работающих протоколов маршрутизации 
- Обнаружение и выбор оптимальных маршрутов доставки данных (один канал загружен - посылаем по другому)
- Реализация доступа к глобальной сети
- Преобразование сетевых адресов 
- Соединение сетей второго уровня, организованных через коммутаторы
- Спец. функции по обеспечению безопасности

## Межсетевой экран
Устройство обеспечения сетевой безопасности, используемое для обеспечения безопасной связи между двумя сетями. Он отслеживает, ограничивает и изменяет проходящие через него потоки данных для защиты информации, структуры и рабочего состояния внутренних сетей от сети общего пользования

![[Pasted image 20240101133319.png]]
### Функции межсетевых экранов:
1. Изоляция сетей с различными уровнями безопасности. Например, отделение интранета от интернета
2. Реализация контроля доступа с использованием политик безопасности (длина пароля, срок действия пароля, доступ к папкам)
3. Реализация аутентификации пользователя (проверка разрешений, которые имеются у пользователя в системе). __Не путать с идентификацией и аудитом. Идентификация - это проверка наличия такого пользователя__. __Аудит- журналируемость действий пользователя системы__
4. Реализация удалённого доступа
5. Поддержка шифрования и VPN. 
6. Реализация преобразования сетевых адресов (преобразуют белые адреса в серые и наоборот. Т.е протокол NAT)
7. Реализация других функций безопасности

*ЧАСТО В маршрутизатор встраивают межсетевой экран*

## Беспроводные устройства (IoT)
Fit AP, Fat AP
### Определение сети
Беспроводная сеть (в широком смысле) - сеть которая использует радиоволны, лазерные и инфракрасные сигналы в качестве канала передачи данных.

В беспроводной локальной сети будут работать следующие стандартные устройства:
1. Точки доступа, которые делятся, исходя из режимов работы, на:
	1. Fat AP - этот режим, в основном, применяется в жилых домах. Работает независимо и необходимо настраивать отдельно. Режим обладает простыми функциями и имеет низкие затраты
	2. Fit AP - применяется для средних и крупных предприятий. Для работы требуется контроллер доступа, через который осуществляется управление и настройка режима
	3. Облачное управление - применяется для малых и средних предприятий для единого управления и настройки требуется взаимодействие с облачной платформой. 
	- Кроме различных функций поддерживает автоматическую настройку и запуск в работу. Название такой технологии - plug & play
2. Контроллер доступа (как правило) работает на уровне агрегации и обеспечивает высокоскоростные, безопасные и надёжные услуги беспроводной локальной сети. Предоставляет услуги беспроводного управления данными с большой ёмкостью, высокой производительностью, надёжностью, простотой установки и тех. обслуживания. Он обеспечивает гибкую организацию сети и энергосбережение

#### Главное отличие Fat AP от Fit AP в том, что для Fit AP обязательно нужен контроллер, которыми управляет всеми Fit AP.
Лучше всего Fit AP представить на примере дройдов из ЗВ, у которых имеется какое-то ядро, которое ими всеми управляет.
А в случае с Fat AP
## Режимы передачи сигнала по направлению передачи:
1. SIMPLEX (Только принятие/отправка сигнала. Радио)
2. HALF-DUPLEX (Возможность либо передавать, либо принимать сигнал, НО не одновременно.)
3. FULL-DUPLEX (Соединение на передачу и принятие данных между 2 узлами. Пример: витая пара)

## Режимы передачи по количеству адресов для которых передаются данные:
1. UNICAST (передача от одного устройству к другому устройству. Т.е - 1 vs 1 )
2. MULTICAST (передача от одного устройство к нескольким. Т.е 1 vs 4)
3. BROADCAST (Широковещательная рассылка. Т.е 1 vs All)
# 6. Коммутация каналов
**Исторически первый тип коммутации**. При коммутации каналов образуется сеть между конечными узлами посредствам непрерывного составного физического канала (телефонные линии). Этот канал состоит из последовательно соединённых коммутаторами промежуточных канальных участков. 

Условием такого единого физического канала является равенство скоростей передачи данных в каждом из составляющих его физических каналов. Это условие означает, что коммутаторы такой сети не должны буферизировать передаваемые данные (выстраивать из них очередь на передачу) - только передача 

### Итого: Свойство, которым должны обладать узлы связи: Одинаковая скорость у каналов (в противном случае будут искажения)
### Плюсы коммутации каналов
1. Предсказуемость - постоянная и известная скорость передачи данных, что даёт пользователю возможности на основе заранее произведённой оценки  пропускной способности установить в сети канал требуемой скорости (нужен канал на терабайт или 20 Мб?)
2. Качество - низкий и постоянный уровень задержки передачи данных, это позволяет качественно передавать данные, чувствительные к задержкам
### Минусы:
1. Обязательная задержка перед передачей данных из-за фазы установления соединения 
2. Отказ сети в обслуживании запроса на установление соединения - разрыв соединения, высокая нагруженность на канал связи, линия используется 2 абонентами (звоню бабушке, а она уже разговаривает с Аней...)
3. Нерациональное использование пропускной способности физических каналов - та часть пропускной способности, которая отводится составному каналу, представляется ему на всё время пока соединение не будет разорвано, однакт абонентам не всегда нужна такая пропускная способность, поскольку, например, могут возникать паузы в разговоре. Невозможность динамического распределения пропускной способности является принципиальным ограничением сети с коммутацией каналов (молчим в трубку - а линия занята только нами,)

### Единица передачи информации:
Единицей коммутации здесь является информационный поток в целом. Именно поэтому эту сеть нельзя использовать трафик 'пульсирующий' (разная нагрузка в течении времени)
# 7. Коммутация пакетов
Специально разработана для компьютерного трафика. В первых компьютерных сетях на основе коммутации каналов невозможно было достичь общей высокой пропускной способности (каналы заняты, в них данные только 2 абонентов). 

- Так как сетевые приложения генерируют трафик очень неравномерно, то можно говорить о высоком уровне пульсации скорости передачи данных. (в Battlefield 4 может загружаться таблица лидеров, а может 10 человек). 
- При коммутации пакетов все передаваемые пользователем сообщения разбиваются в исходном хосте на небольшие части - пакеты, которые транспортируются по сети как независимые информационные блоки. 
- Коммутаторы пакетной сети отличаются тем, что имеют внутреннюю буферную (очередь в Netflix) память для временного хранения пакетов. Если выходной порт коммутатора в момент принятия пакета занят передачей другого пакета, то можно:
	- либо перенаправить данные через другой порт, 
	- либо создать очередь в буферной памяти на передачу пакетов по порядку поступления. Как только выходной порт освобождается, то данные из буфера передаются на него. Такая схема передачи сглаживает 'пульсацию' трафика.
### Плюсы (противоположность минусов от коммутации каналов):
1. Рациональное использование

### Минусы (противоположность плюсов от коммутации каналов):
1. Непредсказуемая задержка (мы не знаем сколько данных)
2. Сеть с коммутацией пакетов замедляет процесс взаимодействия конкретной пары абонентов

- Общий объём передаваемых данных  в единицу времени при технике передачи пакетов будет много выше, чем при технике коммутации каналов, если говорить не о двух абонентах, а о сети.
- Сеть с коммутацией пакетов замедляет процесс взаимодействия конкретной пары абонентов, но повышает пропускную способность в целом.
### Типы задержек в сети с коммутацией пакетов:
1. Задержки на источнике (время на передачу заголовков)Задержки вызванные интервалами между передачей каждого следующего пакета

2. Задержки на получаете (приёмнике):
- Сбор пакетов в один информационный блок или сообщение

3. Задержки на коммутаторе:
- Время буферизации пакетов (мы тратим какое то время на помещение наших данных в буфер)
- Время коммутации (складывается из времени ожидания пакета в очереди и времени перемещения пакета в выходной порт)
# 8. ==Источники стандартов. Типы сетей==
### Стандартизация компьютерных сетей
В зависимости от статуса организации различают следующие виды стандартов:
1. Стандарты отдельных фирм (DEC и её стек Decnet)
2. Стандарты специальных комитетов и объединений (Fast Ethernet был создан силами Fast Ethernet Alliance. ATM был создан ATM Forum)
3. Национальные (Стандарт передачи данных на основе Token Ring'a - FDDI - был создан с помощью ANSI - американского национального института стандартов)
4. Международные (IEEE, ISO - эти организации международные)

Стандарты могут сменить свой статус - т.е стандарт фирмы может стать международным стандартом. Пример: IBM создала стандарт по архитектуре компьютера. 

Стоит отдельно упомянуть организацию, которая предложила большое количество стандартов в сфере компьютерных сетей и систем (в частности - TCP/IP) - DoD (Министерство обороны США)
## Наиболее важные типы стандартов:
- **ISO –** международная организация по стандартам. Данная организация приняла стандарт на эталонную модель открытых систем.
- **IEEE** **–** институт инженеров по электронике и электротехнике. Данная организация принимает стандарты на технологии передачи данных. (Например, стандарт беспроводной передачи данных - 802.11)
- **IAB** **–** совет по архитектуре интернета. Данная организация принимает стандарты на протоколы интернета.
- **W3C** **–** консорциум W3C. Данная организация принимает стандарты на протоколы используемые в WEB
### IEEE:
данная организация принимает стандарты не только в области компьютерных сетей, но так же и в других областях электроники и электротехники. Данная организация разделена на комитеты
#### Комитеты стандартов для компьютерных сетей:
- 802.3 Ethernet
- 802.11 Беспроводные локальные сети (Wi-Fi)
- 802.15 Персональные сети (BlueTooth)
### **IAB**
совет по архитектуре интернета. Данная организация делится на группы.
#### Группы IAB:
- Группа исследования интернета (IRTF) – данная группа занимается долгосрочными и перспективными исследованиями в области интернет.
- Группа проектирования интернета (IETF) – данная группа занимается поддержкой интернета и выпускает стандарты на сетевые протоколы.
- Группа  запросов и комментариев (RFC) – готовит документы RFC. Эти документы в себе содержат описание протоколов интернета.
## Типы сетей по охвату (примеры таких сетей):
1. LAN - локальные (Домашняя сеть (HomeAreaNetwork) из маршрутизатора и каких-то устройств IoT, сеть хранения данных (Storage Area Network) характерная для ЦОДов, беспроводная локальная сеть (WLAN), корпоративные сети (CAN), персональная сеть с устройствами одного пользователя (PersonalAreaNetwork), нательная сеть (BAN), виртуальная локальная сеть (VLAN))
2. MAN - городские сети (между образовательными организации,  муниципальная, или городская, беспроводная сеть (MWN) в Москве)
3. WAN - глобальные (Интернет, облачная сеть, или интернетофицированная, или сеть без привязки к физическому местоположению (IAN), глобальная сеть малого электропотребления, или энергоэффективная (LPWAN), близко-транслируемая сеть или сеть близкого размещения (NAN) )

- LPWAN может использоваться для снижения энергопотребления в каких либо информационных сетях
- NAN - Bluetooth, точки доступа на телефоне
- BAN - нательная сеть. Например: кардио-стимулятор, протез
- NFC - сеть, входящая в NAN 424 Кб/с с расстоянием до устройства до 4 см

# 9. Широковещательный и коллизионный домены

Коммутатор образует _**широковещательный домен**_ - набор хостов, которые могут обмениваться данными, отправляя их на втором уровне, канальном, - через коммутатор. Если условный узел _A_ высылает широковещательный пакет для всех хостов по локальной сети и хост _B_ получает его, то это означает, что оба узла находятся в одном _**широковещательном домене**_.

Существует также _**коллизионный домен**_, когда 2 хоста соединены одним проводом. В таком домене хосты "борются" за разделяемую между ними среду передачи данных и при наложении одной передачи данных на другую возникают коллизии и данные искажаются (в основном **БЫЛИ** характерен для общей шины и каоксиальном кабеле). Мостовое соединение создаёт домен коллизий, но не широковещательный домен. _**Т.е - коллизионный домен создаётся мостом**_.

**_Маршрутизатор не создаёт ни одного из этих доменов. Маршрутизатор, напротив, ставится для изолирования широковещательных доменов._**

- Широковещательная рассылка - передача данных на все устройства в локальной сети. (Например, подключаем новый хост и он делает "приветственную" рассылку, информируя всех о подключении)
- arp-таблица - таблица сопоставления MAC адресов и IP адресов. По умолчанию время хранения arp-таблицы (до её обновления) - 3 минуты. Данная величина может изменяется.
# 10. Многоуровневый подход. Протокол. Интерфейс. Стек протоколов
***Модели межсетевого взаимодействия предназначены для формального и наглядного представления взаимодействия сетевых узлов между собой***

- _Протокол_ - формализованные правила, определяющие последовательность и формат сообщений, которыми обмениваются сетевые компоненты, лежащие **на одном уровне, но в разных узлах**
- - _Стек_ _коммуникационных_ _протоколов -_ иерархически организованный набор протоколов, достаточный для организации **взаимодействия узлов в сети**
- - _Интерфейс-_ четко определенные правила и стандартизованные форматы сообщений с помощью которых модули, реализующие протоколы соседних **уровней и находящиеся в одном узле**, взаимодействуют друг с другом.

Для решения сложных задач используется приём из системного подхода - **декомпозиция**. Декомпозиция заключается в том, что всё множество модулей разбивается на уровни, уровни образуют иерархию, в которой каждый уровень сформирован таким образом, что для выполнения своих задач он обращается с запросами только к модулям непосредственно **примыкающего нижележащего уровня**.

С другой стороны - результаты работы всех модулей, принадлежащих некоторому уровню, могут быть переданы только модулям соседнего **вышележащего уровня**

Примером такого подхода может служить модель OSI
# 11. Модель OSI
OSI была предложена в 1981 Международной организацией по стандартам (ISO). Эта модель считается эталонной и используется как стандарт. OSI сводит передачу данных к 7 относительно простым задачам, а также определяет только сами задачи, не давая конкретного описания их выполнения (для этого применяются правила или протоколы для конкретной системы, с учётом модели OSI). Таким образом уровни OSI могут реализовываться как аппаратно, так и программно.

Основная идея в том, что уровни на различных устройствах должны работать абсолютно идентично . Если этот принцип нарушается, то информация, которая послана одной системой на другую, после преобразований не будет идентична исходной (или вовсе будет потеряна)

Модель OSI имеет 7 уровней. Уровни на разных системах НИКОГДА не общаются с собой напрямую (Сетевой уровень одной системы ничего не знает о сетевом уровне другой системы), исключение - физический уровень, только он имеет информацию о таком же физическом уровне в другой системе.

Для указания адресата добавляется заголовок с адресом. Когда информация доходит до адресата, то она проходит те же уровни, но в обратном направлении, преобразуясь в первоначальный вид, в котором эту информацию отсылали. Каждый уровень полагается на услуги, которые предоставляются его смежными уровнями.
# 12. Стандартные топологии сетей
## Топология сетей (основана на теории графов) -
под топологией вычислительной сети понимается конфигурация графа, вершинами которого являются компьютеры сети и другое коммуникационное оборудование, а рёбрами - физические связи между ними. Компьютеры, периферийные устройства и иные вершины графа в топологии называются узлами (host'ами)

Конфигурация физических связей определяется электрическими соединениями узлов между собой и может отличаться от логической конфигурации связей. 

Логические связи представляют собой маршруты передачи данных между узлами в сети. Она реализуется путём соответствующей настройки коммуникационного оборудования

**Конфигурация физических и логических связей может не совпадать** (например, физически соединили по 2-ум портам коммутаторы, но используем только один. Второй - как резерв)

Вывод (собственный, колхозный): Физические связи - физически сделали что то ручками. Логическая связь- настройка коммутаторов.

### Стандартные топологии сети (пояснение к каждой ниже):
1. Полносвязная
2. Ячеистая (полносвязная, но без избыточных связей)
3. Кольцевая
4. Звезда
5. Общая шина

#### 1. Полносвязная топология - 
сеть, в которой каждый узел связан со всеми остальными узлами отдельным каналом передачи данных

Минусы:
- Избыточные связи (канал связи есть, но он не используется)
- Затрачено много ресурсов (много проводов, портов для каждого соседнего-узла не хватит)

Плюсы:
- Надёжной, высокая отказо-устройчивость (не работает один канал передачи данных - задействуем другой канал, транзитный маршрут через другой узел)

Вывод: данная топология почти не используется, ранее была только в маленьких организациях с небольшим количеством узлов

#### 2. Ячеистая -
Получается из **полносвязной** путём удаления некоторых избыточных, малоиспользуемых связей. В такой топологии, в основном, остаются связи между узлами, у которых налажен интенсивный обмен данными, трафиком. Такая топология допускает соединение большого количества компьютеров и характерны, как правило, для глобальных сетей.

#### 3. Кольцевая топология
Плюсы:
- Данная топология не имеет ограничений по числу абонентов (более 1 тыс.).
- За счёт усиления сигнала каждым абонентом (сетевым адаптером абонента) общая длинна кольца может достигать десятков километров, при этом длинна кольца формально ограничена только временем прохождения сигнала по кольцу и минимальной пропускной способностью
Минусы:
- Сложна в масштабировании (разрыв канала между старыми абонентами и вставка нового узла)

#### 4. Общая шина
Компьютеры подключаются к одному кабелю. Строится по принципу монтажного ИЛИ. Передаваемая информация может распространяться в обе стороны. 
Плюсы:
- Применение общей шины обеспечивает возможность почти мгновенное широковещательное обращение ко всем узлам сети
- Низкая стоимость проводки кабеля по помещениям
- Унифицированное подключение различных модулей 
  
  Минусы:
- Любой дефект кабеля или выход из строя одного из многочисленных узлов, парализует всю сеть. 
- Низкая производительность сети с такой топологией. Пропуская соборность делится на все компьютеры сети

#### 5. Звезда -
сеть, в которой каждый компьютер подключается отдельным кабелем к общему устройству, например, коммутатору или концентратору. В функции центрального устройства входит:

- Направление передаваемой информации получателю или получателям
- Интеллектуальный фильтр информации, который поступает от узлов в сеть (запрет на передачу трафика от какого-то узла)

**Виды  топологии звезда:**
1. Активная (стандартная) - в центре имеется активное устройство
2. Пассивная - в центре производится только соединение кабелей (фактически даёт общую шину)
3. Иерархическая (дерево) - она строится в случае, если в центральном адаптере не хватает портов для присоединения узлов. К центральному устройству подсоединяется ещё один коммутатор или концентратор

**Минусы:
1. Низкая отказоустойчивость (центральное устройство выходит из строя - сеть ложится)
2. Самый дорогостоящий и сложный элемент - центральный узел(адаптер), на который ложиться вся нагрузка
3. Порты центрального узла ограничены, следовательно, ограничено 

**Плюсы:
1. Удобство развёртывания
2. Дешевизна абонентских узлов
3. Надёжнее общей шины (только неисправность центрального устройства может вывести сеть из строя)

**Ограничения топологии Звезда:
1. Количество портов центрального адаптера
2. Сложность аппаратного и программного соединения нескольких звёзд друг с другом (различные вендоры, которые рассчитывают на использование только своего оборудования)
3. Если в качестве центрального устройства выступает компьютер, то помимо коммутационных функций он должен выполнять и свои вычислительные функции, таким образом - он может быть сильно перегружен как трафиком, так и своими задачами

==ЕСЛИ БУДЕТ ВОПРОС:==
**Для организации взаимодействия пользователей в сети необходимо определить каким образом происходит распределение ресурсов. Есть 2 подхода к решению задачи** :
1. Организация одноранговой сети: в такой сети каждый узел является как потребителем(клиентом), так и владельцем(сервером) предоставляемых ресурсов. Причём одна и та же машина может быть одновременно клиентом для одних и сервером для других. Применение такого подхода оправдано в небольших сетях. P2P, локальная сеть
2. Сети с выделенным сервером: одно (а чаще много больше) устройство назначается в качестве сервера, к которому иные устройства делают запросы
# 13. Модель TCP\IP
Стек протоколов TCP/IP (Transmission Control Protocol/Internet Protocol, протокол управления передачей/протокол интернета) — сетевая модель, описывающая процесс передачи данных. В отличие от OSI, TCP\IP является практически применимой моделью, которая активно используется для построения сетей.

Модель TCP\IP также как и модель OSI выделяет несколько уровней для описания процесса передачи данных в сети. 

Выделяют несколько нотаций модели TCP\IP: Стандартная и эквивалентная. 

Эквивалентная модель наиболее близка к модели OSI и выделяет 5 уровней:
- Уровень приложений
- Транспортный уровень
- Сетевой уровень
- Уровень канала данных
- Физический уровень
Т.е последние 3 уровня модели OSI - представления, прикладной, сеансовый - были объединены в уровень приложений. Прочие уровни остались неизменными.

Стандартная модель TCP\IP выделяет 4 уровня:
- Уровень приложений
- Транспортный уровень
- Межсетевой уровень
- Уровень сетевого доступа (объединён из физического и канального уровня модели OSI)
# 14. Сетезависимые уровни модели OSI
Все уровни модели OSI можно поделить на сете-зависимые и сете-независимые.
- Первые три уровня (физический, канальный, сетевой) являются сете-зависимыми. Зависят от аппаратной и физической части реализации построения сети
- Транспортный - промежуточный уровень
- Верхние 3 (сеансовый, уровень представления и прикладной) - сете-независимый. Не имеет значение каким образом приложения получили или отправили информацию
# 15. Сетенезависимые уровни модели OSI
Все уровни модели OSI можно поделить на сете-зависимые и сете-независимые.
- Первые три уровня (физический, канальный, сетевой) являются сете-зависимыми. Зависят от аппаратной и физической части реализации построения сети
- Транспортный - промежуточный уровень
- Верхние 3 (сеансовый, уровень представления и прикладной) - сете-независимый. Не имеет значение каким образом приложения получили или отправили информацию, важно лишь то, что информация была получена данными уровнями и она корректна. В случае необходимости три верхних уровня могут принимать информацию к обработке и без сети, например, через внешний накопитель
# ==16. Транспортный уровень модели OSI==
На пути от отправителя к получателю, пакеты могут быть утеряны или искажены, хотя некоторые приложения имеют собственный средства обработки ошибок, существуют такие, которые предпочитают сразу иметь дело с надежным и безопасным соединением.

Транспортный уровень обеспечивает верхним уровням модели OSI передачу данных с той степенью надежности, которой им требуется.

Модель OSI определяет несколько сервисов, которые предоставляются транспортным уровнем. Эти сервисы отличаются по следующим характеристикам: 
1. Срочностью. 
2. Возможность восстановления, надёжность. 
3. Наличие средств мультиплексирования нескольких соединений. 
4. Способностью к обнаружению и исправлению ошибок передачи, таких как искажения, потеря, дублирование

Наиболее развитый сервис транспортного уровня - TCP - использует максимум средств для обнаружения и устранения ошибок, например: 
1. Получение подтверждения от получателя на передачу данных. 
2. Контроль доставки данных по контрольным суммам 
3. Нумерация сегментов данных. 
4. Установление Time-out для доставки. 
5. Повторная пересылка пакетов при их искажении или потере.

- Основные протоколы: TCP, UDP, SPX/IPX (Nowell Стек).
- Единицей передачи данных является **сегмент** для TCP и **DATA** **грамма** для UDP.
- На транспортном уровне происходит адресация по портам (программный порт)
# 17. Сетевой уровень модели OSI
Сетевой уровень служит для образования единой системы объединяющей несколько сетей, причем эти сети могут использовать разные принципы для передачи данных и обладать произвольной топологией. 

- Основным устройством на сетевом уровне является маршрутизатор. Это устройство, которое собирает информацию о топологии меж сетевых соединений и на ее основании пересылают пакеты сеть назначения. 
- Последовательность ХОПОВ от отправителя до получателя. Проблема выбора наилучшего пути называется маршрутизацией, и решением ее является главной задачей сетевого уровня.
- Единица передачи данных - пакет
- Передача ведётся по IP-адресу (она иерархичная - одна часть за подсеть, другая - за хост)
На сетевом уровне определяется 2 вида сетевых протоколов:
1. Сетевые протоколы, которые реализует передвижение пакетов через сеть. Т.е - протоколы адресации (Например, протокол IP)
2. Протоколы маршрутизации, с помощью которых маршрутизаторы собирают информацию о топологии внешних соединений. (OSPF, BGP, IS-IS, RIP).  
**Протоколы сетевого уровня реализуются программный модулями ОС, а также программными и аппаратными средствами маршрутизаторов**

## Задачи, сетевого уровня:
1. Согласование разных топологий и технологий
2. Упрощение адресации в крупных сетях
3. Создание надёжных и гибких барьеров на пути трафика между сетей
# 18. Уровень приложений модели TCP\IP
- Предоставляет интерфейсы, посредством которых приложения используют сетевые услуги. Протокол уровня приложений определяет протоколы и порты на транспортном уровне
- На уровне приложений единицей передачи информации будет PDU (полезная нагрузка, данные, сообщения - всё означает одно и то же)
![[Pasted image 20240101110823.png]]
### Стандартные протоколы уровня приложений:
#### FTP
Будет использовать транспортный протокол TCP доставки файлов от хоста к хосту. Протокол FTP предоставляет форматы и правила, по которым FTP-клиент и FTP-сервер общаются друг с другом.

FTP-клиент предоставляет команды локальным пользователям для работы с файлами на удалённом компьютере. Также отвечает за запрос на соединение с FTP-сервером

FTP сервер предоставляет функции доступа и управления удалённым клиентом.

Т.е: у клиента есть графический интерфейс для управления файлами на сервере, чтобы выбрать какие файлы он хотел бы себе получить

#### Telnet
Стандартный протокол, который позволяет осуществлять удалённое подключение к устройству. Предоставляет пользователям возможность управлять удалёнными устройствами через локальный ПК
#### HTTP
Протокол передачи гипертекста. Является одним из наиболее распространённых протоколов в интернете. Изначально HTTP разрабатывался для того, чтобы обеспечить публикацию и получение HTML-страниц.

Сейчас используется для получения информации от конечных точек по средством HTTP-глаголов:
1. GET - запрос элемента
2. POST - создание нового элемента 
3. PUT - обновление элемента
4. DELETE - удаление элемента

# 19. TCP и UDP – форматы заголовков
![[Pasted image 20240101111735.png]]
1. Порт источника (16 бит)
2. Порт назначения (16 бит)
3. Поле порядкового номера (длина - 32 бита) - указывает на первый порядковый номер отправленный в сегменте
4. Поле номера подтверждения (длина - 32 бита) - порядковый номер первого байта следующего сегмента, который ожидается для получения. Значение этого поля равно порядковому номеру последнего байта полученного в предыдущем сегменте, увеличенного на соединение. Это поле действительно только при установлении флага _ACK_
5. Длина заголовка (4 бита) - указывает на длину заголовка TCP и измеряется в блоках по 4 байта.
6. Резерв (6 бит)- это поле зарезервировано и имеет значение 0. Необходимо для выравнивания
7. Биты управления (6 бит) - отвечает за следующие флаги:
	- URG - показывает приоритет пакетов, срочность
	- ACK - флаг подтверждения. Показывает, что отправленный ранее сегмент был получен
	- PSH - выталкивает поставленные в очередь данные из буферов
	- RST - сброс соединение TCP по завершении или после разрыва
	- SIN - нужен для синхронизации соединения, договорились
	- FIN - завершает передачу данных
8. Окно (16 бит) -  используется для управления потоком TCP, значения этого поля представляют собой максимальное количество байт, которое разрешил получатель при передачи данных в одном сегменте
9. Контрольная сумма (16 бит) - поле для контроля целостности передаваемых данных, вычисляется и помещается в сегмент отправителем, а проверяется получателем
10. Указатель срочности (16 бит) (действует только при установке флага) URG и указывает на то, что отправитель передаёт данные в аварийном режиме. Указатель будет показывать количество байт срочных данных в сегменте. Срочные данные размещаются в начале сегмента.
11. Опции (0-40 байт) - необязательное поле, может составлять от 0 до 40 байт

Т.е - всего в заголовке TCP может быть 60 байт - 20 обязательные, 40 - опциональные.

UDP как протокол не гарантированной передачи имеет лишь 5 полей, с теми же опциями:
1. Порт источника (16 бит)
2. Порт назначения (16 бит)
3. Длина заголовка (16 бит)
4. Контрольная сумма (16 бит)

# 20. Описание TCP-соединения
## Трёхстороннее квитирование (трёхстороннее рукопожатие)
- https://nextcloud-storage.talantiuspeh.ru/index.php/apps/onlyoffice/s/MJRsMJAiCAyco82?fileId=3541729 - презентация с квитированием
- https://jcsound.ru/articles/kakoe-pole-v-zagolovke-tcp-ukazyvaet-sostoyanie-trehstoronnego-protsessa-rukopozhatiya.html - статья по квитированию
### Процесс установления TCP соединения состоит из следующих шагов:
![[Pasted image 20240102121203.png]]
1. Инициатор TCP соединения (П1) отправляет запрос на соединение
2. Инициатор соединения - ПК 1 - отправляет первый сегмент с флагом SYN, здесь же порядковый номер сегмента 'a' - случайно сгенерированное число (Seq = a). Номер подтверждения равен 0, потому что ранее от ПК2 ничего не приходило (Ack = 0)
3. После получения корректного TCP сегмента с флагом Syn от ПК 1, получатель - ПК 2 - отвечает своим сегментом, подтверждая синхронизацию с помощью флагов Syn и Ack. Здесь же - порядковый номер сегмента - 'b' - (Seq=b) является также случайным числом (ранее ничего ПК2 ничего не отсылал, поэтому этот номер сегмента **генерируется**). Поскольку сегмент является ответом для ПК 1, то номер подтверждения будет равен a+1, это тот номер, который будет ждать ПК2 в следующем сегменте от ПК 1 (Seq=b Ack=a+1)
4. После получения сегментов ПК 1 отвечает своим сегментом, в котором установлен флаг Ack. Порядковый номер сегмента а+1 (ПК2 ожижает этот сегмент) - Seq=a+1, а номер подтверждения - b+1  - это именно тот порядковый номер, который будет ожидать ПК 1 (Asc=b+1). Как только ПК 2 получил этот сегмент, устанавливается TCP соединение

ИТОГО: 
- Ack -  поле, в котором указывается какой сегмент **ОЖИДАЕТ** получить отправитель от получателя. 
	1. **Важно**: показатель зависит от полезной нагрузки. Т.е: если ПК2 получил данные от ПК1 в размере 12 байт, то это поле будет выглядеть так: Ack = a + 2 + 12
- Seq - номер сегмента, который отправитель посылает получателю.
	1. **Важно**: поле изменяется только если переправляется полезная нагрузка. Т.е - если ПК2 отсылал только служебную информацию (т.е - никакой полезной нагрузки в его сообщениях не было), 
# 21. Уровень канала данных модели TCP\IP. Принципы реализации ARP
Уровень, который располагается между сетевым и физическим уровнем и предоставляет сервисы для таких протоколов как IPv4 и IPv6, на сетевом уровне
- Данный уровень обеспечивает связь между сегментами для сетевого уровня 
- Единица передачи информации - кадры
- Наиболее распространённый протокол канального уровня - Ethernet
- На данном уровне используется MAC-адресация
- Самое распространённое устройство данного уровня - коммутаторы
## Функции канального уровня:
1. Формирование кадров
2. Физическая адресация (MAC-адресация)
3. Управление ошибками
## Принципы реализации ARP:
![[Pasted image 20240102105947.png]]

# 22. Физический уровень модели TCP\IP. Виды и характеристики сигналов
Получив данные физический уровень преобразует цифровой сигнал в оптический, электрический или электромагнитный в соответствии с физическим носителем

- Единица передачи информации - битовые потоки
- На данном уровне стандартизируются физические характеристики, например, кабели, контакты, значение напряжения и интерфейсы

### Стандартные среды передачи данных:
- Витые пары
- Оптоволокно
- Последовательные кабели
- Беспроводные сигналы
### Виды сигналов используемых на физическом уровне:
- электрические;
- электромагнитные;
- оптические;
- акустические

### Основные характеристики сигнала:
- амплитуда - это максимальное отклонение сигнала от положения равновесия
- частота - характеристика сигнала, равная количеству повторений в единицу времени
- фаза - характеристика сигнала описывающая его периодичность
# 23. Интернет-протокол и IP-адресация
**IP** - протокол, в котором определён и описан формат IP-пакетов
Часто термин IP относится не конкретно к самому протоколу, а используется в более широком смысле относительно различных понятий, непосредственно или косвенно, связанных с IP
## Функции IP:
1. Предоставление логической адресации устройств на сетевом уровне
2. Отвечает за адресацию и переадресацию пакетов данных

### Версии IP:
- IPv4
- IPv6
# 24. Формат пакета IPv.4
## Заголовок IP пакета состоит из следующих полей:
1. Версия (4 бита) - может содержать только 2 значения: 4 и 6 в двоичной системе
2. Длина заголовка (4 бита) - указывает размер заголовка. Если опции не передаются, то длина будет составлять 20 байт. Максимальное значение: 60 байт. Т.е - 40 байт выборочны
3. Тип сервиса (1 байт) - задаёт приоритетность пакета и вид критерия для выбора маршрута. Используется для технологии QOS. 
   - Первые 3 бита этого поля образуют подполе "приоритет пакета" (Precedents) - значение от 0 до 7 (0 - нормальный пакет, 7 - пакет, управляющий информацией). Маршрутизаторы и ПК могут принимать во внимание приоритет пакета и обрабатывать более важные пакеты в первую очередь.
   - Следующие 3 бита - критерии выбора маршрута. Есть 3 альтернативы:
		- D - малая задержка (маршрут с минимальной задержкой для доставки этого пакета)
		- T - трафик - максимизация пропускной способности
		- E - достоверность - максимизация надёжности, достоверности доставки
**Оставшиеся 2 бита зарезервированы нулями**
- Общая длина - 2 байта - общая длина пакета с учётом заголовка и поля данных - всё в байтах
==максимальная размер ip пакета - 65535 байт==

### Следующие поля:
4.  TTL (8 бит) - время жизни пакета. Максимальное количество хобов: 256 - 1 = 255 
5. Протокол (8 бит) - указывает на протокол, который будет обрабатывать данные на стороне получателя, после обработки на сетевом уровне. Часто используемые значения поля:
- 1 - протокол ICMP (ping, tracerout)
- 2 - IGMP протокол для управления группами интернета
- 6 - TCP 
- 17 - UDP
6. Контрольная сумма заголовков (16 бит)
7. IP адрес источника (32 бита)
8. IP адрес назначения (32 бита)
9. Опции - является необязательным и, обычно, используется для отладки. Механизм опций представляет функции управления, которые необходимы или просто полезны при определённых ситуациях. Для обычной коммуникации он не нужен. В данном поле можно указывать:
- Точный маршрут прохождения маршрутизаторов
- Регистрировать проходимые пакетом устройства
- Помещать данные системы безопасности
- Временные отметки

Т.к число опций может быть произвольным, то в конце поля должно быть добавлено несколько байт для выравнивания. Выравнивание осуществляется нулями

### Эти 3 поля применяются в случае применения фрагментации:
Размеры IP пакетов, которые пересылаются по сети могут отличаться. Если размер IP пакета превышает максимально допустимый размер для канала данных, то пакет необходимо разделить. Процесс разделения IP пакета - **фрагментация**

Для передачи фрагментированных пакетов в заголовке существуют 3 поля:

10. Идентификатор (16 бит) - это поле имеет значение, назначенное хостом-отправителем, уникально идентифицирует фрагмент пакета и используется для сборки пакета у хоста получателя
11.  Флаги (3 бита) - определяет контроль над фрагментацией:
- Первый бит равен нулю и зарезервирован
- Второй бит - Есть ли фрагментация или нет (1 - фрагментация запрещена, 0 - разрешена)
- Третий бит - если 1, то это значит за этим фрагментом есть и другие фрагменты. 0 - фрагмент последний
12. Смещение фрагментов (12 бит) - поле используется для сборки  фрагментов и указывает на относительное положение фрагмента в исходном пакете. Данное поле используется совместно с 3-им битом флагов, чтобы помочь получателю собрать фрагменты в правильном порядке
# 25. Типы и классы IP-адресов
## Типы IP-адресов:
1. Публичные (белые) - адреса, которые присваиваются организацией IANA и которые гарантируют, что каждый такой IP-адрес является уникальным в Интернете 
2. Частные (серые) - IP адреса, которые  используются для однозначной идентификации в одной локальной сети.
3. Специальные - служебные адреса, которые используются в сети для определённых целей. Например, если необходимо, чтобы пакет с данными не покидал пределов устройства при передаче для тестирования сайта

- NAT - протокол, по которому белые IP-адреса преобразуются в серые, а серые - в белые. Благодаря этому удалось реализовать костыль по увеличению IP-адресов 4 версии

### Специальные IP-адреса:
![[Pasted image 20240102113753.png]]

## Классы IP-адресов:
Класс IP-адресов показывает какая часть в адресе была отведена на сетевую часть, а какая на хостовую часть. Таким образом определяется количество адресов, которое может использоваться в сети.
![[Pasted image 20240102113105.png]]

# 26. Организация подсетей
## Уровни сети:
1. Узел доступа
2. Узел агрегации
3. Основной узел (ядро)

## Правила планирования:
- Масштабируемость - адреса должны быть надлежащим образом зарезервированы на каждом уровне, чтобы обеспечить смежное адресное пространство для суммирования маршрутов при расширении сети (сейчас у нас в сети 10 хостов, а потом их может стать 14 - надо это предусмотреть)
- Уникальность - каждый хост в сети должен обладать уникальным IP-адресом
- Непрерывность - смежные адреса можно легко суммировать в иерархических сетях. Суммирование маршрутов уменьшает размер таблицы маршрутизации и ускоряет вычисление маршрутов (строим дерево поиска)
- Сочетание топологии и сервисов - облегчение планирования маршрутов и развёртывания QOS. Планирование IP-адресов помогает легко определить положение устройств и типы сервисов по значению IP-адреса (первый свободный адрес мы должны отводить под шлюз. Т.е - резервируем адреса для устройств, которым нужен статический адерес)

VLSM - технология, благодаря которой мы можем выделять на сетевую часть не октет, а биты

# 27. IPv.6
## Преимущества IPv6
- Практически бесконечное адресное пространство (2^128 - хватит всем IoT'ам)
- Автоматическая настройка (SLAC)
- Упрощённый заголовок пакета
- Функции безопасности (проверка подлинности адреса источника)
- Мобильность (улучшает связь в реальном времени)
- Расширенные функции QOS

## Заголовок IPv6
### Поля:
1. Версия (8 бит)
2. Traffic class (8) - поле, которое указывает класс или приоритет пакета. В 4 версии было поле Тип сервиса, и использовалось, в основном, для управление QOS
3. Flow Label (20 бит) - Нужно для различия трафика в реальном времени. Данное поле помогает однозначно идентифицировать устройство. **В 4 версии его не было**. 
4. Payload Length (16 бит) - Длина полезной нагрузки
5. Next Header (8 бит) - Определяет тип первого расширенного заголовка, если он есть, или тип протокола верхнего уровня, который будет обрабатывать данные. **Т.е - Protocol из 4 версии**
6. Hob limit (8 бит) - поле для указания TTL (максимум - 255)
7. Адрес источника (128 бит)
8. Адрес назначения (128 бит)

#### Замечания относительно заголовка IPv6:
- В 6 версии длина заголовка фиксированная - 40 бит. В IPv4 - разброд и шатание, так как там 20-60 бит
-  Тут нет broadcast'a. 
- Тут у нас не октеты, а блоки. Блоки делятся не точками, а двоеточиями. В каждом блоке 4 символа. Всего 8 блоков
- Тут применяются сокращения - опускаются нули в начале, а также сокращаются нулевые блоки.
	-  Возможно использовать двоеное двоеточие для пропуска нулевых блоков. ВАЖНО: сокращать двоеточием можно сокращать только один раз

### Классификация IPv6 адресов:
1. Индивидуальные - идентифицирует один интерфейс устройства (Порты в коммуникационных устройствах, сетевые адаптеры - в обычных устройствах). Пакеты, отправленные на этот адрес, доставляются только на этот интерфейс.
	- В IPv6 интерфейс может иметь несколько адресов IPv6
2. Многоадресные (групповые) адреса - идентифицируют группу интерфейсов. Пакеты посылаемые на этот адрес доставляются всем интерфейсам участникам группы рассылки (все получили пакет)
3. Произвольные - позволяют адресовать группу интерфейсов, которые обычно принадлежат разным узлам. В отличие от групповых, при использовании произвольного адреса пакеты доставляются на ОДИН из интерфейсов, определяемых этим адресом (кому повезёт, тот и получил пакетик)
	- Пример применения: хост посылает на произвольный адрес запрос, надеясь получить доступ к БД. На другом конце (за коммутатором) у нас 2 сервера с БД, которые идентичны друг другу. В случае, если одна БД не работает, то нам ответит другой сервер с БД. 
### Специальные адреса для IPv6: 
- **0.0.0.0.0.0.0.0** - неопознанный адрес. Используется в качестве адреса источника некоторых пакетов, например, при инициализации DHCP версии 6. (Используется когда у нас новое устройство в сети)
- **Loop back address 0.0.0.0.0.0.0.1** - Запрос не выходит за пределы устройства


# 28. Что такое маршрут? Информация о маршрутизации. Как получить информацию о маршрутизации?
- Маршрут - **путь, который должен пройти пакет от отправителя до точки назначения через маршрутизирующие устройства**
- Маршрутизация - выбор оптимального маршрута для доставки данных от отправителя к получателю 

Информация о маршрутизации получается путём считывания данных из таблицы маршрутизации, где содержаться оптимальные маршруты доставки данных до сети получателя. 

- Чаще всего в таблицу маршрутизации включается маршрут не до конкретного получателя, а до его подсети

# 29. Расширенные возможности маршрутизации CIDR суммирование маршрутов
Функции для отслеживания поведения сети и использование сети авторизованными пользователями.

Расширенные возможности маршрутизации позволяют маршрутизаторам более эффективно обрабатывать и передавать пакеты данных. Одним из таких возможностей является CIDR (Classless Inter-Domain Routing), которая позволяет использовать более гибкие маски подсетей для более эффективного использования адресного пространства.

В традиционных сетях IP-адреса были разделены на три класса: A, B и C. Каждый класс имел фиксированную маску подсети, которая определяла размер подсети. Например, маска подсети 255.255.255.0 указывала на то, что подсеть состоит из 256 адресов.

CIDR позволяет использовать маски подсети произвольной длины. Это позволяет более эффективно использовать адресное пространство, особенно в сетях с большим количеством узлов.

Например, маска подсети 255.255.255.224 указывает на то, что подсеть состоит из 16 адресов. Это вдвое больше, чем подсеть с маской 255.255.255.0, но при этом использует только один бит из первого байта адреса.

CIDR также позволяет маршрутизаторам более эффективно обрабатывать маршруты. Маршрутизаторы используют таблицы маршрутизации для хранения информации о маршрутах к различным узлам сети. Когда маршрутизатор получает новый пакет данных, он просматривает свою таблицу маршрутизации, чтобы найти маршрут к узлу назначения.

Если маршрутизатор использует CIDR, он может использовать более эффективный алгоритм для поиска маршрута. Этот алгоритм позволяет маршрутизатору быстро определить, какие маршруты не подходят для пакета.

Суммирование маршрутов - это еще одна расширенная возможность маршрутизации, которая позволяет маршрутизаторам объединять несколько маршрутов в один. Это может помочь уменьшить размер таблиц маршрутизации и повысить эффективность обработки маршрутов.

Например, предположим, что маршрутизатор имеет две записи маршрутизации для подсетей 192.168.1.0/24 и 192.168.2.0/24. Эти записи маршрутизации указывают, что эти подсети доступны через интерфейсы E0 и E1 маршрутизатора соответственно.

С помощью суммирования маршрутов маршрутизатор может объединить эти две записи маршрутизации в одну запись маршрутизации для подсетей 192.168.0.0/16. Эта запись маршрутизации указывает, что подсети 192.168.1.0/24 и 192.168.2.0/24 доступны через интерфейсы E0 и E1 маршрутизатора соответственно.

Суммирование маршрутов может быть полезно в сетях с большим количеством подсетей. Оно может помочь уменьшить размер таблиц маршрутизации и повысить эффективность обработки маршрутов.

Вот некоторые преимущества использования расширенных возможностей маршрутизации:

Более эффективное использование адресного пространства
Более эффективная обработка маршрутов
Уменьшение размера таблиц маршрутизации
Повышение эффективности сети
Расширенные возможности маршрутизации являются важными инструментами, которые могут помочь улучшить производительность и эффективность сети.
# 30. Таблица маршрутизации
Маршрутизатор может знать по несколько маршрутов к каждой подсети, однако в своей таблице маршрутизации он будет хранить не все известные ему маршруты, а только оптимальные

### Поля таблицы маршрутизации:
![[Pasted image 20240102194508.png]]
1. Назначение и маска - указывается адрес сети-назначения и её маска 
2. Протокол - указывает на тип протокола маршрутизации или способ, с помощью которого маршрутизатор узнал про маршруты
3. Приоритет маршрута или предпочтение маршрута (Preference) - данный столбец указывает уровень предпочтения данного протокола маршрутизации или способа получения маршрута. Маршрутизатор выбирает предпочтительный маршрут с самым низким значением данного параметра, в качестве предпочтительного маршрута
4. Стоимость или метрика (Cost) - если несколько маршрутов к одной и той же сети имеют одинаковое предпочтение, то в качестве оптимального выбирает маршрут с самой низкой стоимостью. В качестве метрики могут быть использованы такие параметры как:
	- Количество хобов
	- Пропускная способность
	- Помехоустойчивость
	- Уровень задержки
	- и т.д
5. Адрес следующего узла (Next hop) - адрес следующего маршрутизатора на пути к сети назначения
6. Интерфейс - указывает исходящий интерфейс, через который локальный маршрутизатор двигает пакеты дальше

# 31. Статические маршруты и маршруты по умолчанию, маршруты прямого подключения
1. Маршруты прямого подключения (Direct-маршруты) - маршруты в подсети, к которым принадлежат напрямую подключённые интерфейсы, эти маршруты генерируются автоматически (Напрямую протащили кабель от маршрутизатора до хоста). 
	- Когда маршрутизатор является последним на пути к сети для пересылки IP-пакетов он выбирает соответствующий маршрут прямого подключения
	- Когда маршрутизатор пересылает пакеты с помощью маршрута прямого подключения, он не доставляет пакеты на следующий маршрутизатор. Он проверяет свои ARP-записи и пересылает пакет на IP-адрес устройства-назначения на основе нужной записи в ARP-таблице. Поскольку в маршруте прямого подключения интерфейс маршрутизатора и адрес сети-назначения находится в одном сетевом сегмента, адрес следующего узла такого маршрута будет совпадать с IP-адресом интерфейса данного маршрутизатора
		- Не все маршруты прямого подключения, сгенерированные для интерфейсов, находятся в таблице маршрутизации. Туда попадает только те маршруты, у которых на исходящем интерфейсе физический статус и статус протокола находятся во включённом состоянии, т.е - состоянии **up**
2. Статические маршруты - настраиваются сетевыми администраторами вручную
3. Маршруты по умолчанию - также настраиваются в ручную, но используются лишь в случае, если маршрутизатор не смог найти информацию о маршруте до получателя в своей таблице маршрутизации
4. Динамические маршруты, полученные с помощью протокола динамической маршрутизации
# 32. Протоколы маршрутизации по состоянию канала
Маршрутизация по состоянию каналов (используется в протоколе OSPF) - в отличие от дистанционно-векторной маршрутизации, протокол маршрутизации по состоянию каналов анонсирует информацию о каналах передачи данных, а не маршруты таблицы маршрутизации. Каждый маршрутизатор генерирует LSA и добавляет полученные LSA в свою базу данных состояния каналов - LSDB. LSDB содержит описание всех интерфейсов маршрутизаторов в сети и всю топологию сети. Каждый маршрутизатор использует алгоритм SPF и информацию LSDB для расчёта маршрутов. Каждый маршрутизатор вычисляет дерево кратчайших путей (без петель) до сетей назначения и в этом дереве он является корнем. На основе данного дерева определяются оптимальные маршруты в каждой подсети. В конечном итоге маршрутизатор помещает ЛУЧШИЕ маршруты в свою таблицу маршрутизации. Процесс внедрения протокола маршрутизации по состоянию канала состоит из следующих шагов:
	1. Установка взаимосвязей между соседними маршрутизаторами (установка отношений соседства)
	2. Обмен информации о статусе каналов и синхронизация LSDB между соседними маршрутизаторами
	3. Расчёт оптимального пути
	4. Генерирование записей маршрутов на основе дерева самых коротких путей и загрузка этих записей в таблицу маршрутизации
# 33. ААА, принципы и конфигурации
## Концепция AAA:
1. Аутентификация - проверка наличия у пользователя разрешения на доступ к сети 
2. Авторизация - предоставление доступов пользователям
3. Учёт - журналируемость для отслеживания действий пользователей

==Для запоминания==: 2 факторная аутентификация в Steam 

Система управления, предоставляющая безопасные механизмы для авторизации пользователей, чтобы получить доступ к определённым ресурсам и записывать операции этих пользователей. 

Концепция AAA широко используется из-за её хорошей масштабируемости и простой реализации через множество протоколов. Например, протокол RADIUS.
### Общая архитектура:
- Пользователь
- Сервер сетевого доступа (NAS - network accses server) - представлен маршрутизатором
- Сервер AAA

**NAS** - собирает и осуществляет централизованное управление запросами пользователей на доступ. На NAS создаётся несколько доменов для менеджмента пользователей, которые настроены с помощью различных схем AAA.

## Режимы аутентификации AAA:
1. Без аутентификации - пользователям полностью доверяют, проверка их личности не выполняется
	- **Недостаток**: Применяется редко из-за плохого уровня безопасности
2. Локальная аутентификация - информация о локальных пользователях (имя, пароль, атрибуты) настраиваются на сервере NAS. В этом случае NAS выполняет функции сервера AAA
	- **Недостаток**: объём хранимой информации ограничен аппаратным обеспечением устройством сервера NAS
	- **Плюс**: локальная аутентификация отличается возможностями быстрой обработки и низкими эксплуатационными расходами
	- Часто используется с протоколами Telnet, FTP
3. Удалённая аутентификация - информация о пользователе (имя, пароль, атрибуты) настраивается на отдельном сервере аутентификации (AAA сервер). Механизм реализуется с помощью протокола RADIUS. Сервер NAS при этом выступает клиентом. Другое название для AAA сервера - RADIUS сервер

## Авторизация AAA:
1. Без авторизации - пользователи прошедшие проверку имеют неограниченные права доступа в сети
2. Локальная - выполняется на основе конфигурации домена на сервере NAS
3. Удалённая - выполняется с помощью протокола RADIUS. Поскольку RADIUS объединяет аутентификацию и авторизацию, авторизация не выполняется отдельно

### Информация об авторизации включает:
1. Группу пользователя
2. Идентификатор VLAN ID - виртуальная сеть
3. ACL - список контроля доступа

## Учёт:
1. Без учёта - пользователи получают доступ к интернету бесплатно, журнал действий не создаётся
2. Удалённый учёт - создаётся журнал действий через протокол RADIUS


